<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>KnotPoint type · RobotDynamics</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">RobotDynamics</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="models.html">1. Setting up a Dynamics Model</a></li><li><a class="tocitem" href="dynamics_evaluation.html">2. Evaluating the Dynamics</a></li></ul></li><li><span class="tocitem">Documentation</span><ul><li><a class="tocitem" href="discretization.html">Discretization</a></li><li class="is-active"><a class="tocitem" href="knotpoints.html"><code>KnotPoint</code> type</a><ul class="internal"><li><a class="tocitem" href="#Types-1"><span>Types</span></a></li><li><a class="tocitem" href="#Methods-1"><span>Methods</span></a></li><li><a class="tocitem" href="#Mathematical-Operations-1"><span>Mathematical Operations</span></a></li></ul></li><li><a class="tocitem" href="liemodel.html">Models with Rotations</a></li><li><a class="tocitem" href="rigidbody.html">Rigid Bodies</a></li><li><a class="tocitem" href="linearmodel.html">Linear Models</a></li><li><a class="tocitem" href="finite_diff.html">Finite Differencing</a></li><li><a class="tocitem" href="dynamics_api.html">Dynamics API</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Documentation</a></li><li class="is-active"><a href="knotpoints.html"><code>KnotPoint</code> type</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="knotpoints.html"><code>KnotPoint</code> type</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/master/docs/src/knotpoints.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="KnotPoint-type-1"><a class="docs-heading-anchor" href="#KnotPoint-type-1"><code>KnotPoint</code> type</a><a class="docs-heading-anchor-permalink" href="#KnotPoint-type-1" title="Permalink"></a></h1><p>A common way of dealing with trajectories of forced dynamical systems, especially in optimization, is to represent a trajectory with a fixed number of &quot;knot points&quot;, typically distributed evenly over time. Each point records the states, controls, time, and time step to the next point. It is often convenient to store all this information together, which is the purpose of the <code>AbstractKnotPoint</code> type. Additionally, it is almost always more efficient to index into a concatenated vector than it is to concatenate two smaller vectors, so the states and controls are stacked together in a single  <code>n+m</code>-dimensional vector.</p><p>RobotDynamics.jl defines a couple different implementations of the <code>AbstractKnotPoint</code> interface, which can be useful depending on the application.</p><h2 id="Types-1"><a class="docs-heading-anchor" href="#Types-1">Types</a><a class="docs-heading-anchor-permalink" href="#Types-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.AbstractKnotPoint" href="#RobotDynamics.AbstractKnotPoint"><code>RobotDynamics.AbstractKnotPoint</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">AbstractKnotPoint{T,n,m}</code></pre><p>Stores the states, controls, time, and time step at a single point along a trajectory of a forced dynamical system with <code>n</code> states and <code>m</code> controls.</p><p><strong>Interface</strong></p><p>All instances of <code>AbstractKnotPoint</code> should support the following methods:</p><pre><code class="language-none">state(z)::StaticVector{n}     # state vector
control(z)::StaticVector{m}   # control vector
z.t::Real                     # time
z.dt::Real                    # time to next point (time step)</code></pre><p>By default, it is assumed that if <code>z.dt == 0</code> the point is the last point in the trajectory.</p><p>Alternatively, the methods <code>state</code> and <code>control</code> will be automatically defined if the following fields are present:</p><ul><li><code>z.z</code>: the stacked vector <code>[x;u]</code></li><li><code>z._x</code>: the indices of the states, such that <code>x = z.z[z._x]</code></li><li><code>z._u</code>: the indices of the controls, such that <code>x = u.z[z._u]</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L6-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.GeneralKnotPoint" href="#RobotDynamics.GeneralKnotPoint"><code>RobotDynamics.GeneralKnotPoint</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">GeneralKnotPoint{T,n,m,V} &lt;: AbstractKnotPoint{T,n,m}</code></pre><p>A mutable instantiation of the <code>AbstractKnotPoint</code> interface where the joint vector <code>z = [x;u]</code> is represented by a type <code>V</code>.</p><p><strong>Constructors</strong></p><pre><code class="language-none">GeneralKnotPoint(n::Int, m::Int, z::AbstractVector, dt, [t=0])
GeneralKnotPoint(z::V, _x::SVector{n,Int}, _u::SVector{m,Int}, dt::T, t::T)
KnotPoint(z::V, _x::SVector{n,Int}, _u::SVector{m,Int}, dt::T, t::T)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L84-L94">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.KnotPoint" href="#RobotDynamics.KnotPoint"><code>RobotDynamics.KnotPoint</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">KnotPoint{T,n,m,nm}</code></pre><p>A <code>GeneralKnotPoint</code> whose stacked vector <code>z = [x;u]</code> is represented by an <code>SVector{nm,T}</code> where <code>nm = n+m</code>.</p><p><strong>Setters</strong></p><p>Use the following methods to set values in a <code>KnotPoint</code>:</p><pre><code class="language-julia">set_state!(z::KnotPoint, x)
set_control!(z::KnotPoint, u)
z.t = t
z.dt = dt</code></pre><p><strong>Constructors</strong></p><pre><code class="language-julia">KnotPoint(x, u, dt, [t=0.0])
KnotPoint(x, m, [t=0.0])  # for terminal knot point</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L113-L133">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.StaticKnotPoint" href="#RobotDynamics.StaticKnotPoint"><code>RobotDynamics.StaticKnotPoint</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">StaticKnotPoint{T,n,m,nm} &lt;: AbstractKnotPoint{T,n,m}</code></pre><p>An immutable <code>AbstractKnotPoint</code> whose stacked vector is represented by an <code>SVector{nm,T}</code> where <code>nm = n+m</code>. Since <code>isbits(z::StaticKnotPoint) = true</code>, these can be created very efficiently and with zero allocations.</p><p><strong>Constructors</strong></p><pre><code class="language-none">StaticKnotPoint(z::SVector{nm}, _x::SVector{n,Int}, _u::SVector{m,Int}, dt::Float64, t::Float64)
StaticKnotPoint(x::SVector{n}, u::SVector{m}, [dt::Real=0.0, t::Real=0.0])
StaticKnotPoint(z0::AbstractKnotPoint, z::AbstractVector)</code></pre><p>where the last constructor uses another <code>AbstractKnotPoint</code> to create a <code>StaticKnotPoint</code> using the stacked state-control vector <code>z</code>. If <code>length(z) == n</code>, the constructor will automatically append <code>m</code> zeros.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L162-L179">source</a></section></article><h2 id="Methods-1"><a class="docs-heading-anchor" href="#Methods-1">Methods</a><a class="docs-heading-anchor-permalink" href="#Methods-1" title="Permalink"></a></h2><p>All <code>AbstractKnotPoint</code> types support the following methods:</p><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.state" href="#RobotDynamics.state"><code>RobotDynamics.state</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">state(::AbstractKnotPoint)</code></pre><p>Return the <code>n</code>-dimensional state vector</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L30-L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.control" href="#RobotDynamics.control"><code>RobotDynamics.control</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">control(::AbstractKnotPoint)</code></pre><p>Return the <code>m</code>-dimensional control vector</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.is_terminal" href="#RobotDynamics.is_terminal"><code>RobotDynamics.is_terminal</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">is_terminal(::AbstractKnotPoint)::Bool</code></pre><p>Determine if the knot point is the terminal knot point, which is the case when <code>z.dt == 0</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.get_z" href="#RobotDynamics.get_z"><code>RobotDynamics.get_z</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_z(::AbstractKnotPoint)</code></pre><p>Returns the stacked state-control vector <code>z</code>, or just the state vector if <code>is_terminal(z) == true</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L51-L55">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.set_state!" href="#RobotDynamics.set_state!"><code>RobotDynamics.set_state!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_state!(z::AbstractKnotPoint, x::AbstractVector)</code></pre><p>Set the state in <code>z</code> to <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L58-L62">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.set_control!" href="#RobotDynamics.set_control!"><code>RobotDynamics.set_control!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_control!(z::AbstractKnotPoint, u::AbstractVector)</code></pre><p>Set the controls in <code>z</code> to <code>u</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L65-L69">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.set_z!" href="#RobotDynamics.set_z!"><code>RobotDynamics.set_z!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_z!(z::AbstractKnotPoint, z_::AbstractVector)</code></pre><p>Set both the states and controls in <code>z</code> from the stacked state-control vector <code>z_</code>, unless <code>is_terminal(z)</code>, in which case <code>z_</code> is assumed to be the terminal states.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/dab497eb6f596ee1beb8a7ac36a07d1b3b8da208/src/knotpoint.jl#L72-L77">source</a></section></article><h2 id="Mathematical-Operations-1"><a class="docs-heading-anchor" href="#Mathematical-Operations-1">Mathematical Operations</a><a class="docs-heading-anchor-permalink" href="#Mathematical-Operations-1" title="Permalink"></a></h2><p>All <code>AbstractKnotPoint</code> types support addition between two knot points, addition of a knot point and a vector of length <code>n+m</code>, and multiplication with a scalar, all of which will return a <code>StaticKnotPoint</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="discretization.html">« Discretization</a><a class="docs-footer-nextpage" href="liemodel.html">Models with Rotations »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 10 July 2021 19:18">Saturday 10 July 2021</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
